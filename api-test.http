@admin_token = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiJzYXVyYWJocGFuZGV5ODkwOEBnbWFpbC5jb20iLCJpYXQiOjE3NjcyNzMxNzQsImV4cCI6MTc2NzM1OTU3NH0.QOWf1bjLOymqz9B46849zb7XV2ZasscMUVwkukEZVRUtTlWaa1K8vcr3k5XnQR3X
@student_token = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiJyb2NreWJoYWk4OTA4QGdtYWlsLmNvbSIsImlhdCI6MTc2NzI3MzE5NSwiZXhwIjoxNzY3MzU5NTk1fQ.7fqkiQ8DBeJldR9nwFN4qtWN-KFBnVZ4MDnPyLLaKKtIdLamdtGJ8nidZln0WR1n

### Test 1: Register a new Student
POST http://localhost:8080/api/auth/register
Content-Type: application/json

{
  "name": "Rocky Bhai",
  "email": "rockybhai8908@gmail.com",
  "password": "rocky",
  "role": "STUDENT"
}

### Test 2: Login User (Get Token)
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "email": "saurabhpandey8908@gmail.com",
  "password": "brandNewPassword123"
}
### Test Login Student: Login User (Get Token)
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "email": "rockybhai8908@gmail.com",
  "password": "rocky"
}

### Test 3 : Register User
POST http://localhost:8080/api/auth/register
Content-Type: application/json

{
  "name": "Saurabh Pandey",
  "email": "saurabhpandey8908@gmail.com",
  "password": "password963",
  "role": "ADMIN"
}

### Test 4: Change Password
POST http://localhost:8080/api/users/change-password
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiJzYXVyYWJocGFuZGV5ODkwOEBnbWFpbC5jb20iLCJpYXQiOjE3NjcwMjI4MjUsImV4cCI6MTc2NzEwOTIyNX0.mbMmDPbVzr9t5LLElI8gv_osm3v99bhr5K-V20zFEeg2zmxPhLsD5cGKt3x2Akkp

{
  "currentPassword": "newPassword789",
  "newPassword": "newPassword7890",
  "confirmationPassword": "newPassword7890"
}

### Test 5: Forgot Password
POST http://localhost:8080/api/users/forgot-password
Content-Type: application/json

{
  "email": "saurabhpandey8908@gmail.com"
}

### Test 6: Reset Password (Using Token)
POST http://localhost:8080/api/users/reset-password
Content-Type: application/json

{
  "token": "f876e779-c80a-4599-97eb-71fb5010579c",
  "newPassword": "brandNewPassword123",
  "confirmPassword": "brandNewPassword123"
}

### Test 7: Upload Material (Multipart)
POST http://localhost:8080/api/materials/upload
Authorization: Bearer eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiJzYXVyYWJocGFuZGV5ODkwOEBnbWFpbC5jb20iLCJpYXQiOjE3NjcwODQ1MjksImV4cCI6MTc2NzE3MDkyOX0.FhKqVOwdlT0poSuYcHFXOTJCWWtu486bKmOKU1Dgi2J3H795zMEFSWvSHcHnGWl8
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="title"

Java Basics - Chapter 1
--WebAppBoundary
Content-Disposition: form-data; name="description"

Introduction to Java syntax and loops.
--WebAppBoundary
Content-Disposition: form-data; name="subject"

Java Programming
--WebAppBoundary
Content-Disposition: form-data; name="type"

NOTE
--WebAppBoundary
Content-Disposition: form-data; name="file"; filename="sem5 timetable.pdf"

< ./sem5 timetable.pdf
--WebAppBoundary--

### Test 8 : Get list of pending notes
GET http://localhost:8080/api/materials/pending
Authorization: {{admin_token}}
Content-Type: application/json


### Test 9 :  Approve a Material (Replace 10 with actual ID)
PUT http://localhost:8080/api/materials/5/approve
Authorization: Bearer eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiJzYXVyYWJocGFuZGV5ODkwOEBnbWFpbC5jb20iLCJpYXQiOjE3NjcwODEyNjIsImV4cCI6MTc2NzE2NzY2Mn0.-4BxxMJ65C2iSOXRObn2z7KgI-CfPJBIvHt3fjdTDzat6EHgBfB-ZFZxG_2vlZQU
Content-Type: application/json

### Delete a Material (Replace '15' with actual ID)
DELETE http://localhost:8080/api/materials/14
Authorization: Bearer eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiJzYXVyYWJocGFuZGV5ODkwOEBnbWFpbC5jb20iLCJpYXQiOjE3NjcwMzM1NzQsImV4cCI6MTc2NzExOTk3NH0.s-Eb2nAM9lQQWFf31jFGBZ7S6O3rits0xTTxOrxakhJS8koMAiNTELvyGPBXn73K


###  1. Search by Subject (e.g., Java)
GET http://localhost:8080/api/materials/search?subject=Java
Content-Type: application/json

### 2. Search by Semester (e.g., Semester 1)
GET http://localhost:8080/api/materials/search?semester=Semester 1
Content-Type: application/json

### 3. Search by Text Query (e.g., 'loops' or 'notes')
GET http://localhost:8080/api/materials/search?query=loops
Content-Type: application/json

### 4. Combined Filter (Subject + Semester + Type)
GET http://localhost:8080/api/materials/search?subject=Java&semester=Semester 1&type=NOTE
Content-Type: application/json


### Test. Download Material (Should Redirect to Cloudinary)
# Replace '15' with a valid Material ID
GET http://localhost:8080/api/materials/15/download


#DISCUSSION FORUM MODULE

### 1. Create a Post (Need Token)
POST http://localhost:8080/api/forum/posts
Authorization: Bearer {{student_token}}
Content-Type: application/json

{
  "title": "How you all doing",
  "content": "I want to connect to you all lets connect and share our current experiences",
  "category": "Community Post"
}

### 2. Get All Posts (Checking Feed)
GET http://localhost:8080/api/forum/posts
Authorization: Bearer {{student_token}}

### 3. Add Comment to the Post (Need Token & Post ID from above)
POST http://localhost:8080/api/forum/comments
Authorization: Bearer {{student_token}}
Content-Type: application/json

{
  "content": "I am doing well brother,and what are you learning currently",
  "postId": 4
}

### 4. Get Comments of a Post
GET http://localhost:8080/api/forum/posts/{{post_id}}/comments
Authorization: Bearer {{student_token}}

##==========================================
# USER DASHBOARD & PROFILE
# ==========================================

### 1. Get My Profile (Check current details)
GET http://localhost:8080/api/users/profile
Authorization: Bearer {{student_token}}

### 2. Update Profile (Add University)
PUT http://localhost:8080/api/users/profile
Authorization: Bearer {{student_token}}
Content-Type: application/json

{
  "university": "MGKVP"
}

### 3. Get My Uploads (Check Pending/Approved status)
GET http://localhost:8080/api/users/uploads
Authorization: Bearer {{student_token}}

#==========================================
# MY ACTIVITY
# ==========================================

### 1. Download as Logged-in User (To create history)
GET http://localhost:8080/api/materials/15/download
Authorization: Bearer {{student_token}}

### 2. Get My Downloads History
GET http://localhost:8080/api/users/activity/downloads
Authorization: Bearer {{student_token}}

### 3. Get My Posts
GET http://localhost:8080/api/users/activity/posts
Authorization: Bearer {{student_token}}

### 4. Get My Comments
GET http://localhost:8080/api/users/activity/comments
Authorization: Bearer {{student_token}}

# ==========================================
# RATINGS & REVIEWS
#==========================================

### 1. Add a 5-Star Review
POST http://localhost:8080/api/materials/14/reviews
Authorization: Bearer {{student_token}}
Content-Type: application/json

{
  "rating": 4,
  "comment": "Sahi hai bhai"
}

### 2. Check Updated Material (Should show rating: 5.0 and totalReviews: 1)
GET http://localhost:8080/api/materials
Authorization: Bearer {{student_token}}

### 3. Try Duplicate Review (Should Fail)
POST http://localhost:8080/api/materials/15/reviews
Authorization: Bearer {{student_token}}
Content-Type: application/json

{
  "rating": 1,
  "comment": "Cheating kar raha hoon"
}

###

#-----------------------------------------
#FORUM & COMMUNITY FEATURES

### 1. Create a Post with Category (Setup Step)
POST http://localhost:8080/api/forum/posts
Authorization: Bearer {{student_token}}
Content-Type: application/json

{
  "title": "Testing3 the Post feature",
  "content": "For loop aur While loop mein kya difference hai?Example needed too",
  "category": "Doubt"
}

### 2. Upvote the Post (Java Loops wala)
### Upvote Post ID 5
POST http://localhost:8080/api/forum/posts/5/vote
Authorization: Bearer {{student_token}}
Content-Type: application/json

{
  "voteType": "UPVOTE"
}

### 3. Search for "Loop"
GET http://localhost:8080/api/forum/search?query=Loop
Authorization: Bearer {{student_token}}

### 4. Filter by Category "Doubt"
GET http://localhost:8080/api/forum/search?category=Doubt
Authorization: Bearer {{student_token}}

### Search for "Testing3"
GET http://localhost:8080/api/forum/search?query=Testing3
Authorization: Bearer {{student_token}}

### Filter by Category "Doubt"
GET http://localhost:8080/api/forum/search?category=Doubt
Authorization: Bearer {{student_token}}

### 5. Add a Comment (Setup for Best Answer)
POST http://localhost:8080/api/forum/comments
Authorization: Bearer {{student_token}}
Content-Type: application/json

{
  "content": "For loop counting ke liye hota hai, While condition ke liye.",
  "postId": 3
}

### 6. Mark Comment as Best Answer (Accepted)
# Note: Replace '1' (PostId) and '1' (CommentId) with actual IDs
# Important: Must use the SAME USER token who created the post!
PUT http://localhost:8080/api/forum/posts/4/comments/4/accept
Authorization: Bearer {{student_token}}

# ==========================================
#ADMIN DASHBOARD
#==========================================

### Get Dashboard Statistics (Total Users, Materials, etc.)
GET http://localhost:8080/api/admin/stats
# Note: Use a Token belonging to a user with role "ADMIN"
Authorization: Bearer {{admin_token}}

### Get List of All Users (Check for ID and isBlocked status)
GET http://localhost:8080/api/admin/users
Authorization: Bearer {{admin_token}}

### 2. Block User with ID 6 (Toggle: False -> True)
PUT http://localhost:8080/api/admin/users/6/toggle-block
Authorization: Bearer {{admin_token}}

### 3. Try Login as Blocked Student (Should Fail)
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "email": "rockybhai8908@gmail.com",
  "password": "rocky"
}

### 4. Unblock User with ID 6 (Toggle: True -> False)
PUT http://localhost:8080/api/admin/users/6/toggle-block
Authorization: Bearer {{admin_token}}

#==========================================
# FORUM MODERATION (ADMIN POWERS)
# ==========================================

### 1. Delete a Post (As Admin)
DELETE http://localhost:8080/api/forum/posts/1
Authorization: Bearer {{admin_token}}
# ------------------------------------------
### 2. Delete a Comment (As Admin)
DELETE http://localhost:8080/api/forum/posts/3/comments/4
Authorization: Bearer {{admin_token}}
# ==========================================
# CREATE NEW ADMIN
#==========================================
### 1. Create a New Admin (Only accessible by current Admin)
POST http://localhost:8080/api/admin/create-admin
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Chhota Don",
  "email": "don@admin.com",
  "password": "donpassword"
}

### Upload Profile Picture
POST http://localhost:8080/api/users/profile-pic
Authorization: Bearer {{admin_token}}
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="file"; filename="profile.jpg"

< ./profile.png
--WebAppBoundary--

# Note: Ensure 'profile.jpg' exists in your project folder OR change path

### Get My Profile (Check if profilePicUrl is present)
GET http://localhost:8080/api/users/profile
Authorization: Bearer {{student_token}}

# ==========================================
# SUPPORT & FEEDBACK SYSTEM (TICKET SYSTEM)
# ==========================================

### 1. Create a Support Ticket (As Student)
# Creates a query regarding a login issue or notes request.
POST http://localhost:8080/api/support
Authorization: Bearer {{student_token}}
Content-Type: application/json

{
  "subject": "Download Issue",
  "message": "I am unable to download the Java Notes PDF. It shows a 404 error."
}

### 2. Check My Ticket History (As Student)
# Should show the ticket created above with status "OPEN".
GET http://localhost:8080/api/support/my-tickets
Authorization: Bearer {{student_token}}

### 3. View All Tickets (As Admin)
# Admin checks the dashboard for any pending queries.
GET http://localhost:8080/api/admin/support
Authorization: Bearer {{admin_token}}

### 4. Resolve/Reply to Ticket (As Admin) - TRIGGERS EMAIL ðŸ“§
# Replace '1' with the actual Ticket ID from the previous step.
# This will send an email to the student.
PUT http://localhost:8080/api/admin/support/2/reply
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "replyMessage": "Hello, we checked the server logs. The file was temporarily moved. Please try again now, it is fixed."
}

### 5. Verify Resolution (As Student)
# Student checks history again. Status should be "RESOLVED" and adminReply should be visible.
GET http://localhost:8080/api/support/my-tickets
Authorization: Bearer {{student_token}}